<!DOCTYPE html>
<html ng-app="cami">
<head>
    <meta charset="utf-8" />
    <meta name="format-detection" content="telephone=no" />
    <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, target-densitydpi=medium-dpi" />

    <link rel="stylesheet"  href="libs/jQM-flat/jquery.mobile.flatui.css">
    <link rel="stylesheet" type="text/css" href="css/index.css" />
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    <!-- Compiled and minified CSS -->
    <link rel="stylesheet" href="css/materialize.min.css">
    <link href="http://getbootstrap.com/dist/css/bootstrap.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="css/fullcalendar.print.css"/>
    <link rel="stylesheet" href="css/fullcalendar.min.cs.css"/>
    <title>Cami</title>

    <script type="text/javascript" src="libs/fastclick.min.js"></script>
    <script type="text/javascript" src="phonegap.js"></script>
    <script type="text/javascript" src="libs/jquery-2.0.3.min.js"></script>
    <script type="text/javascript" src="libs/jQueryMobile/jquery.mobile-1.3.2.min.js"></script>
    <script type="text/javascript" src="js/moment.js"></script>
    <script type="text/javascript" src="js/index.js"></script>
    <script type="text/javascript" src="js/Chart.bundle.min.js"></script>
    <script type="text/javascript" src="js/fullcalendar.min.js"></script>
    <!-- Compiled and minified JavaScript -->
    <script type="text/javascript" src="js/materialize.min.js"></script>
    <script type="text/javascript" src="js/angular.min.js"></script>
    <script type="text/javascript">
        app.initialize();
        console.log(JSON.stringify({
            registration_id: "/api/v1/user/2/",
            type: "GCM",
            user: "/api/v1/user/2/",
            other_info: "{}"
        }));
        app.cami = angular.module("cami",[]);
        app.cami.controller("AppController",function($scope){
            console.log("is this working1?!");
            app.cami.pacient = $scope;
        });
    </script>

</head>
<body ng-controller="AppController">
<div id="app">
    <div id="loginPage" data-role="page">
        <div data-role="content">
            <form id="loginForm">
                <div data-role="fieldcontain" class="ui-hide-label">
                    <label for="username">Username:</label>
                    <input type="text" name="username" id="username" value="" placeholder="Username" />
                </div>

                <div data-role="fieldcontain" class="ui-hide-label">
                    <label for="password">Password:</label>
                    <input type="password" name="password" id="password" value="" placeholder="Password" />
                </div>

                <input type="submit" value="Login" id="submitButton">
            </form>
        </div>
    </div>

    <div id="home-page" data-role="page">
        <div data-role="content" >
            <!--<a data-icon="flat-heart" data-theme="d" href="#second-page" data-role="button">Second Page</a>-->
            <p>Welcome</p>
        </div>
    </div><!-- /page  -->

    <div id="enduser-page" data-role="page">
        <div id="enduser-journal-header-page" class="ui-header header">
            <a href="#loginPage" class="backButton" onclick="logOff()" data-role="button" data-icon="arrow-l" data-inline="true" >Back</a>
        </div>
        <div class="content" ng-if="latestReminders.length > 0">
            <ul id="enduser-latest-reminders" data-indicators="true" data-role="listview" style="overflow-y:scroll; margin: 0 !important;" >
                <li>
                    <div class="row">
                        <div class="col-4 left-border"></div>
                        <div class="col-4">
                            <img class="enduser-latest-reminder-img" src="{{latestReminders[0].image}}"/>
                        </div>
                        <div class="col-4 right-border"></div>
                    </div>
                    <div class="latest-reminder-container half-height">
                        <div class="row">
                            <div class="col-1"></div>
                            <div class="col-10 latest-reminder-content1">{{latestReminders[0].description}}</div>
                            <div class="col-1"></div>
                        </div>
                        <hr/>
                        <div class="row">
                            <div class="col-1"></div>
                            <div class="col-10 latest-reminder-content2">{{latestReminders[0].message}}</div>
                            <div class="col-1"></div>
                        </div>
                        <div class="row">
                            <div class="col-6">
                                <div id="checkReminderBtn" onclick="checkReminder()" class="btn-reminder">
                                    <i class="fa fa-check"></i>
                                    <br>
                                    Check
                                </div>
                            </div>
                            <div class="col-6">
                                <div id="cancelReminderBtn" onclick="cancelReminder()" class="btn-reminder">
                                    <i class="fa fa-times"></i>
                                    <br>
                                    Cancel
                                </div>
                            </div>
                        </div>
                    </div>
                </li>
            </ul>
        </div>
        <div class="content" ng-if="latestReminders.length == 0">
            <div class="row">
                <div class="col-12">
                    <h1>
                        No new reminders!
                    </h1>
                </div>
            </div>
        </div>

        <div id="enduser-footer" data-role="footer" data-id="footer1" data-position="fixed" data-tap-toggle="false">
            <div id="enduser-navbar" data-role="navbar">
                <ul>
                    <li><a id="enduser-home-button" href="#enduser-page" data-icon="home" data-theme="b">Home</a></li>
                    <li><a id="enduser-journal-button" href="#enduser-journal-page" data-icon="star">Journal</a></li>
                    <li><a id="enduser-logout-button" onclick="logOff()" href="#loginPage" data-icon="back">Logout</a></li>
                </ul>
            </div>
        </div>
    </div><!-- /page  -->

    <div id="enduser-journal-page" data-role="page">
        <div id="enduser-journal-header" class="ui-header header">
            <a href="#loginPage" class="backButton" onclick="logOff()" data-role="button" data-icon="arrow-l" data-inline="true" >Back</a>
        </div>
        <div class="content">
            <ul>
                <li data-ng-repeat="(date,rems) in reminders">
                    <div class="roundedCard w3-container w3-border w3-round-xlarge">
                        <div class="row enduser-journal-dateholder">
                            <div class="col-3">
                                <hr class="line">
                            </div>
                            <div class="col-6 date-holder">
                                <p class="date-p">{{date}}</p>
                            </div>
                            <div class="col-3">
                                <hr class="line">
                            </div>
                        </div>
                        <div class="col s12 m7" data-ng-repeat="rem in rems">
                            <div class="row vertical-divider w3-container w3-border w3-round-xlarge">
                                <div class="col-3">
                                    <br>
                                    <img class="card-type-image" src="{{rem.image}}">
                                    <p class="card-time">{{rem.date}}</p>
                                </div>
                                <div class="{{rem.severityClass}}">
                                    <br>
                                    <div>
                                        <p class="card-time">{{rem.description}}</p>
                                    </div>
                                    <hr>
                                    <div>
                                        <p class="card-time">{{rem.message}}</p>
                                    </div>
                                    <br>
                                </div>
                            </div>
                        </div>

                    </div>

                </li>
            </ul>
        </div>
        <div id="enduser-journal-footer" data-role="footer" data-id="footer1" data-position="fixed" data-tap-toggle="false">
            <div id="enduser-journal-navbar" data-role="navbar">
                <ul>
                    <li><a id="enduser-journal-home-button" href="#enduser-page" data-icon="home" >Home</a></li>
                    <li><a id="enduser-journal-journal-button" href="#enduser-journal-page" data-icon="star" data-theme="b">Journal</a></li>
                    <li><a id="enduser-journal-logout-button" onclick="logOff()" href="#loginPage" data-icon="back">Logout</a></li>
                </ul>
            </div>
        </div>
    </div><!-- /page  -->

    <div  id="caregiver-page" data-role="page">
        <div data-role="header" data-id="header" id="header-second-page" data-position="fixed" class="ui-header">
            <a onclick="logOff()" href="#loginPage"  data-role="button" data-icon="arrow-l" data-inline="true" >Back</a>
            <h1>Doctor</h1>
        </div>
        <div data-role="content" >
            
        </div>
        <div id="footer" data-role="footer" data-id="footer1" data-position="fixed" data-tap-toggle="false">
            <div id="navbar" data-role="navbar">
                <ul>
                    <li><a id="home-button" href="#caregiver-page" data-icon="home" data-theme="b">Home</a></li>
                    <li><a id="status-button" href="#caregiver-status-page" data-icon="flat-menu">Status</a></li>
                    <li><a id="journal-button" href="#caregiver-journal-page" data-icon="star">Journal</a></li>
                    <li><a id="activities-button" href="#caregiver-activities-page" data-icon="grid">Activities</a></li>
                    <li><a id="logout-button" onclick="logOff()" href="#loginPage" data-icon="back">Logout</a></li>
                </ul>
            </div>
        </div>
    </div>


    <div id="caregiver-status-page" data-role="page">
        <div data-role="header" data-id="header" data-position="fixed" class="ui-header">
            <a href="#loginPage" onclick="logOff()" data-role="button" data-icon="arrow-l" data-inline="true" >Back</a>
            <h1>Doctor</h1>
        </div>
        <div data-role="content" >
            <div class="row">
                <div class="col-4 selected">
                    <a href='#caregiver-status-page'>
                        <img class="tabicon" src="img/heart.png"/>
                    </a>
                </div>
                <div class="col-4 notSelected">
                    <a href="#caregiver-status-page-weight" >
                        <img class="tabicon" src="img/icon-weight_400x400.png"/>
                    </a>
                </div>
                <div class="col-4 notSelected">
                    <a href='#caregiver-status-page-blood-pressure'>
                        <img class="tabicon" src="img/blood-pressure-icon.png"/>
                    </a>
                </div>
            </div>

            <!-- Tab content -->
            <div id="caregiver-heartrate-chart-div" class="chart-container">
                <h1>Heart Rate</h1>
                <div class="row">
                    <div class="col-6">
                        <p>Latest Value:</p>
                    </div>
                    <div class="col-6">
                        <p id="latest-heartrate-value">?</p>

                    </div>
                </div>
                <canvas id="caregiver-heart-rate-chart">

                </canvas>
            </div>


        </div>
        <div  data-role="footer" data-id="footer2" data-position="fixed" data-tap-toggle="false">
            <div data-role="navbar">
                <ul>
                    <li><a href="#caregiver-page" data-icon="home" >Home</a></li>
                    <li><a href="#caregiver-status-page" data-icon="flat-menu" data-theme="b">Status</a></li>
                    <li><a href="#caregiver-journal-page" data-icon="star">Journal</a></li>
                    <li><a href="#caregiver-activities-page" data-icon="grid">Activities</a></li>
                    <li><a href="#loginPage" onclick="logOff()" data-icon="back">Logout</a></li>
                </ul>
            </div>
        </div>
    </div>

    <div id="caregiver-status-page-weight" data-role="page">
        <div data-role="header" data-id="header" data-position="fixed" class="ui-header">
            <a href="#loginPage" onclick="logOff()" data-role="button" data-icon="arrow-l" data-inline="true" >Back</a>
            <h1>Doctor</h1>
        </div>
        <div data-role="content" >
            <div class="row">
                <div class="col-4 notSelected">
                    <a href='#caregiver-status-page'>
                        <img class="tabicon" src="img/heart.png"/>
                    </a>
                </div>
                <div class="col-4 selected">
                    <a href="#caregiver-status-page-weight" >
                        <img class="tabicon" src="img/icon-weight_400x400.png"/>
                    </a>
                </div>
                <div class="col-4 notSelected">
                    <a href='#caregiver-status-page-blood-pressure'>
                        <img class="tabicon" src="img/blood-pressure-icon.png"/>
                    </a>
                </div>
            </div>

            <div id="caregiver-weight-chart-div" class="chart-container">
                <h1>Weight</h1>
                <div class="row">
                    <div class="col-6">
                        <p>Latest Value:</p>
                    </div>
                    <div class="col-6">
                        <p id="latest-weight-value">?</p>

                    </div>
                </div>
                <canvas id="caregiver-weight-chart">

                </canvas>
            </div>

        </div>
        <div id="footerStatus" data-role="footer" data-id="footer2" data-position="fixed" data-tap-toggle="false">
            <div id="navbarStatus" data-role="navbar">
                <ul>
                    <li><a href="#caregiver-page" data-icon="home" >Home</a></li>
                    <li><a href="#caregiver-status-page" data-icon="flat-menu" data-theme="b">Status</a></li>
                    <li><a href="#caregiver-journal-page" data-icon="star">Journal</a></li>
                    <li><a href="#caregiver-activities-page" data-icon="grid">Activities</a></li>
                    <li><a href="#loginPage" onclick="logOff()" data-icon="back">Logout</a></li>
                </ul>
            </div>
        </div>
    </div>

    <div id="caregiver-status-page-blood-pressure" data-role="page">
        <div data-role="header" data-id="header" data-position="fixed" class="ui-header">
            <a href="#loginPage" onclick="logOff()" data-role="button" data-icon="arrow-l" data-inline="true" >Back</a>
            <h1>Doctor</h1>
        </div>
        <div data-role="content" >
            <div class="row">
                <div class="col-4 notSelected">
                    <a href='#caregiver-status-page'>
                        <img class="tabicon" src="img/heart.png"/>
                    </a>
                </div>
                <div class="col-4 notSelected">
                    <a href="#caregiver-status-page-weight" >
                        <img class="tabicon" src="img/icon-weight_400x400.png"/>
                    </a>
                </div>
                <div class="col-4 selected">
                    <a href='#caregiver-status-page-blood-pressure'>
                        <img class="tabicon" src="img/blood-pressure-icon.png"/>
                    </a>
                </div>
            </div>

            <div id="caregiver-blood-pressure-chart-div" class="chart-container">
                <h1>Blood Pressure</h1>
                <div class="row">
                    <div class="col-6">
                        <p>Latest Value:</p>
                    </div>
                    <div class="col-6">
                        <p id="latest-blood-pressure-value">?</p>

                    </div>
                </div>
                <canvas id="caregiver-blood-pressure-chart">

                </canvas>
            </div>
        </div>
        <div data-role="footer" data-id="footer2" data-position="fixed" data-tap-toggle="false">
            <div data-role="navbar">
                <ul>
                    <li><a href="#caregiver-page" data-icon="home" >Home</a></li>
                    <li><a href="#caregiver-status-page" data-icon="flat-menu" data-theme="b">Status</a></li>
                    <li><a href="#caregiver-journal-page" data-icon="star">Journal</a></li>
                    <li><a href="#caregiver-activities-page" data-icon="grid">Activities</a></li>
                    <li><a href="#loginPage" onclick="logOff()" data-icon="back">Logout</a></li>
                </ul>
            </div>
        </div>
    </div>

    <div id="caregiver-journal-page" data-role="page">
        <div data-role="header" data-id="header" id="header-journal-page" data-position="fixed" class="ui-header">
            <a href="#loginPage" onclick="logOff()" data-role="button" data-icon="arrow-l" data-inline="true" >Back</a>
            <h1>Doctor</h1>
        </div>
        <div data-role="content" >
            <h1>Journal Page</h1>
        </div>
        <div id="footerJournal" data-role="footer" data-id="footer2" data-position="fixed" data-tap-toggle="false">
            <div id="navbarJournal" data-role="navbar">
                <ul>
                    <li><a href="#caregiver-page" data-icon="home" >Home</a></li>
                    <li><a href="#caregiver-status-page" data-icon="flat-menu" >Status</a></li>
                    <li><a href="#caregiver-journal-page" data-icon="star" data-theme="b">Journal</a></li>
                    <li><a href="#caregiver-activities-page" data-icon="grid">Activities</a></li>
                    <li><a href="#loginPage" onclick="logOff()" data-icon="back">Logout</a></li>
                </ul>
            </div>
        </div>
    </div>

    <div id="caregiver-activities-page" data-role="page">
        <div data-role="header" data-id="header" id="header-activities-page" data-position="fixed" class="ui-header">
            <a href="#loginPage" onclick="logOff()" data-role="button" data-icon="arrow-l" data-inline="true" >Back</a>
            <h1>Doctor</h1>
        </div>
        <div data-role="content" >
            <h1>Activities Page</h1>
            <div id="#caregiver-calendar" class="fc fc-unthemed fc-ltr">

            </div>
        </div>
        <div id="footerActivities" data-role="footer" data-id="footer2" data-position="fixed" data-tap-toggle="false">
            <div id="navbarActivities" data-role="navbar">
                <ul>
                    <li><a href="#caregiver-page" data-icon="home" >Home</a></li>
                    <li><a href="#caregiver-status-page" data-icon="flat-menu" >Status</a></li>
                    <li><a href="#caregiver-journal-page" data-icon="star">Journal</a></li>
                    <li><a href="#caregiver-activities-page" data-icon="grid" data-theme="b">Activities</a></li>
                    <li><a href="#loginPage" onclick="logOff()" data-icon="back">Logout</a></li>
                </ul>
            </div>
        </div>
    </div>

    <div id="caregiver-about-page" data-role="page">
        <div data-role="header" data-id="header-about-page" data-position="fixed" class="ui-header">
            <a href="#" data-rel="back" data-role="button" data-icon="arrow-l" data-inline="true" >Back</a>
            <h1>About App</h1>
        </div>
        <div data-role="content"  class="big-text">
            <h2>Privacy Policy</h2>
            <p>...</p>
        </div>
    </div>
</div>

<script type="text/javascript">
    var login = $("#loginForm");
    login.on("submit",handleLogin);

    $('#loginPage').on("pageshow", function(e) {
        if(checkIfUserAlreadyLogged())
        {
            var user = window.localStorage.getItem("user");
            console.log(user);
            user = JSON.parse(user);
            if(user !== null && user !== undefined)
            {
                checkLogin(user['user'], user['password']);
            }
        }
    });
    $("#enduser-journal-page").on("pageshow", function(e) {
        getReminders();
    });
    $("#enduser-page").on("pageshow ", function(e) {
        getReminders();
    });
    $("#caregiver-status-page").on("pageshow", function(e) {
        var ctx = document.getElementById("caregiver-heart-rate-chart");
        var ctx2 = document.getElementById("latest-heartrate-value");
        app.plotHeartRateChart(ctx, ctx2);
    });
    $("#caregiver-status-page-weight").on("pageshow", function(e) {
        var ctx = document.getElementById("caregiver-weight-chart");
        var ctx2 = document.getElementById("latest-weight-value");
        app.plotWeightChart(ctx, ctx2);
    });
    $("#caregiver-status-page-blood-pressure").on("pageshow", function(e) {
        var ctx = document.getElementById("caregiver-blood-pressure-chart");
        var ctx2 = document.getElementById("latest-blood-pressure-value");
        app.plotBloodPressureChart(ctx, ctx2);
    });

    $("#caregiver-activities-page").on("pageshow", function(e) {
        $('#caregiver-calendar').fullCalendar({
            // put your options and callbacks here
        });

    });
</script>


</body>
</html>
